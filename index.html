<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galaxy UPI Payment</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:system-ui,-apple-system,sans-serif;
  background:#000;
  overflow:hidden;
}

/* Card */
.card{
  width:360px;
  padding:28px 24px;
  border-radius:20px;
  text-align:center;
  background:linear-gradient(135deg,#00f5ff,#00bcd4,#00ffff);
  background-size:300% 300%;
  animation:glow 8s ease infinite;
  box-shadow:0 0 60px rgba(0,245,255,.9);
  color:#00252c;
}

@keyframes glow{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.title{font-size:20px;font-weight:700;margin-bottom:12px}
.amount{font-size:18px;margin-bottom:10px}
.amount span{font-weight:800}
.payee{font-size:14px;opacity:.8;margin-bottom:20px}
.secure{margin-top:16px;font-size:13px;opacity:.7}

/* Loader */
.loader{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:#fff;
  font-size:16px;
  display:none;
}

.spinner{
  width:50px;
  height:50px;
  border:5px solid #00f5ff;
  border-top:5px solid transparent;
  border-radius:50%;
  animation:spin 1s linear infinite;
  margin-bottom:15px;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

.success{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  color:#00ffcc;
  font-size:20px;
  display:none;
}
</style>
</head>

<body>

<div class="card">
  <div class="title">ðŸ’³ Pay via UPI</div>
  <div class="amount">Amount: â‚¹<span id="amt">0</span></div>
  <div class="payee" id="payee"></div>
  <div class="secure">Secure UPI â€¢ Telegram Protected</div>
</div>

<div class="loader" id="loader">
  <div class="spinner"></div>
  Processing Payment...
</div>

<div class="success" id="success">
  âœ… Opening UPI App...
  <br><br>
  Please complete your payment
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const haptic = tg.HapticFeedback;

/* Get URL Params */
const params = new URLSearchParams(window.location.search);

const amount = params.get("am") || "0";
const payee = params.get("pn") || "";
const pa = params.get("pa") || "";
const tr = params.get("tr") || "TX" + Date.now();
const tn = params.get("tn") || "Telegram Payment";

/* Display */
document.getElementById("amt").innerText = amount;
document.getElementById("payee").innerText =
  payee ? "Paying to: " + payee : "";

/* Main Button */
tg.MainButton.setText("ðŸš€ PAY â‚¹" + amount);
tg.MainButton.show();
tg.MainButton.enable();

tg.MainButton.onClick(startPayment);

function startPayment(){

  haptic.impactOccurred("medium");

  document.getElementById("loader").style.display="flex";
  tg.MainButton.disable();

  setTimeout(()=>{

    /* ðŸ”¥ ANDROID INTENT LINK (SHOWS UPI APP CHOOSER) */
    const upiIntent =
      "intent://pay?pa="+encodeURIComponent(pa)+
      "&pn="+encodeURIComponent(payee)+
      "&am="+encodeURIComponent(amount)+
      "&cu=INR"+
      "&tr="+encodeURIComponent(tr)+
      "&tn="+encodeURIComponent(tn)+
      "#Intent;scheme=upi;end";

    /* Send Data Back To Bot */
    tg.sendData(JSON.stringify({
      status:"initiated",
      amount:amount,
      transaction:tr
    }));

    document.getElementById("loader").style.display="none";
    document.getElementById("success").style.display="flex";

    haptic.notificationOccurred("success");

    setTimeout(()=>{

      if (tg.platform === "android") {
          tg.openLink(upiIntent);
      } else {
          alert("âš  Please open this payment in Telegram Android app.");
      }

      setTimeout(()=>{
        tg.close();
      },4000);

    },1200);

  },1200);
}
</script>

</body>
</html>
